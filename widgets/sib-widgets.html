<link rel="import" href="./sib-base-widgets.html">

<script>
    class SIBDisplayDiv extends SIBWidget {
        get template() {
            return `<div name="${this.name}">${this.value}</div>`;
        }
    }
    customElements.define("sib-display-div", SIBDisplayDiv);
    
    class SIBDisplayImg extends SIBWidget {
        get template() {
            return `<img name="${this.name}" src="${this.value}" style="max-width: 100%; max-height: 100%;"/>`;
        }
    }
    customElements.define("sib-display-img", SIBDisplayImg);
    
    class SIBDisplayList extends SIBMultipleWidget {
        get parentElement() {return "ul"}
        getTemplate(value, index) {
            return `<li id="${this.name}-${index}">${value}</li>`;
        }
    }
    customElements.define('sib-display-list', SIBDisplayList);

    class SIBDisplayMailTo extends SIBWidget {
        get template() {
          return `<a href="mailto:${this.value}" name="${this.name}">${this.value}</a>`;
        }
    }
    customElements.define("sib-display-mailto", SIBDisplayMailTo);

    class SIBDisplayTel extends SIBWidget {
        get template() {
          return `<a href="tel:${this.value}" name="${this.name}">${this.value}</a>`;
        }
    }
    customElements.define("sib-display-tel", SIBDisplayTel);
    
    
    class SIBFormText extends SIBWidget {
        get template() {
            return `<label for="id-${this.name}">${this.label}</label>
                <input id="id-${this.name}" type="text" name="${this.name}" value="${this.value}">`;
        }
    }
    customElements.define("sib-form-text", SIBFormText);
    class SIBFormTextArea extends SIBWidget {
        get template() {
            return `<label for="id-${this.name}">${this.label}</label>
                <textarea id="id-${this.name}" type="text" name="${this.name}" value="${this.value}"></textarea>`;
        }
    }
    customElements.define("sib-form-textarea", SIBFormTextArea);
    class SIBFormCheckbox extends SIBWidget {
        get template() {
            const checked = this.value ? 'checked' : '';
            return `<label for="id-${this.name}">${this.label}</label>
                <input id="id-${this.name}" type="checkbox" name="${this.name}" ${checked}>`;
        }
    }
    customElements.define("sib-form-checkbox", SIBFormCheckbox);
    class SIBFormDropdown extends SIBMultipleWidget {
        get parentElement() {
            return "select";
        }
        get labelTemplate() {
            return `<label for="id-${this.name}">${this.label}</label>`;
        }
        getTemplate(item, index) {
            const selected = this.value==item['@id'] ? 'selected' : '';
            return `<option value="${item['@id']}" ${selected}>${item.username}</option>`;
        }
        get range() {
            if(!this._range) return [];
            if(!Array.isArray(this._range)) return [this._range];
            return this._range;
        }
        set range(url) {
            store.list(url).then(list => {
                this._range = list;
                this.render();
            });
        }
    }
    customElements.define("sib-form-dropdown", SIBFormDropdown);
</script>
